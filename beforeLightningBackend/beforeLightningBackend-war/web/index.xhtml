<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3c.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet library =" css" name ="cssLayout.css"/>
        <title>Before Lightning Management System</title>
    </h:head>

    <h:body style="background-image: url(#{request.contextPath}/uploadedFiles/StartPageBackground.png); background-size: cover" >
        <div align="centre" style="padding-top: 32%; justify-content: center; display: flex">
            <p:growl id="growlIndex" showDetail="true" />
            <p:panel id="panelLogin" header="Please Login:" style="display: block; width: 40%;">
                <p:panelGrid columns="1" layout="grid" style = "display: block; margin: auto;" >
                    <h:form id="loginBox">    
                        <p:outputLabel value="Username"/>&nbsp;
                        <p:inputText id="username" value="#{loginManagedBean.username}" style=" width: 75%" size="16" required="true" requiredMessage="Username is required" maxlength="32">
                            <f:validateLength minimum="4" />
                        </p:inputText>

                        <br></br>
                        <br></br>

                        <p:outputLabel value="Password "/>&nbsp;
                        <p:password id="inputPassword" value="#{loginManagedBean.password}" style=" width: 75%" size="16" required="true" requiredMessage="Password is required" maxlength="32">
                            <f:validateLength minimum="4" />
                        </p:password>

                        <br></br>
                        <br></br>

                        <div style="justify-content: center; display: flex">
                            <p:commandButton id="buttonLogin" type ="submit" value="Login" actionListener="#{loginManagedBean.login}" ajax="false" />
                            <p:commandButton id="buttonForgetPassword" value="Forget Password" onclick="PF('dialogForgetPassword').show();"  ajax="true" />
                        </div>

                    </h:form>
                </p:panelGrid>
            </p:panel>
            <h:form id="formForgetPassword">  
                <p:dialog id="dialogForgetPassword" header="Forget Password" widgetVar="dialogForgetPassword" modal="true" >
                    <div style="display: table; vertical-align: left;">
                        <br></br>
                        <p:outputLabel value="Please Enter Your Email: "/>
                        <br></br>
                        <br></br>
                        <p:inputText id="inputForgetEmail" value="#{loginManagedBean.email}" size="25" required="true" requiredMessage="Email is required" maxlength="64">
                            <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
                        </p:inputText>
                        <br></br>
                        <br></br>

                        <div style="justify-content: center; display: flex;">
                            <p:commandButton id="dialogConfirmButton" value="Confirm" type="submit" actionListener="#{loginManagedBean.forgetPassword}" styleClass="ui-confirmdialog-yes" />
                        </div>   
                    </div>
                </p:dialog>
            </h:form>
        </div>

    </h:body>
</html>

